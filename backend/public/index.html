<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <title>لوحة التحكم - توزيع</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <!-- استدعاء CSS الموحد للمشروع -->
    <link rel="stylesheet" href="../css/style.css">
    <style>
        body {
            background: #f6f8fb;
        }

        /* Sidebar styles */
        .sidebar {
            position: fixed;
            top: 0;
            right: 0;
            width: 225px;
            height: 100vh;
            background: #1f365c;
            color: #fff;
            box-shadow: -2px 0 16px #0001;
            display: flex;
            flex-direction: column;
            z-index: 300;
            transition: right 0.25s;
        }

        .sidebar .app-title {
            font-size: 1.38rem;
            font-weight: 700;
            text-align: center;
            margin: 23px 0 28px 0;
            letter-spacing: 1px;
        }

        .sidebar ul {
            list-style: none;
            padding: 0 0 0 0;
            margin: 0;
            flex: 1;
        }

        .sidebar li {
            margin: 0;
            padding: 0;
        }

        .sidebar a {
            display: block;
            color: #e4e9f6;
            text-decoration: none;
            font-size: 1.07rem;
            padding: 15px 29px;
            border-right: 4px solid transparent;
            transition: background 0.13s, color 0.13s, border-color 0.13s;
            font-weight: 500;
        }

        .sidebar a.active,
        .sidebar a:focus {
            background: #284b71;
            color: #fff;
            border-right: 4px solid #3e82dc;
        }

        .sidebar a:hover {
            background: #27406b;
            color: #f5faff;
        }

        .sidebar .sidenav-spacer {
            flex: 1;
        }

        /* Hamburger Button */
        .hamburger {
            display: none;
            position: fixed;
            right: 16px;
            top: 14px;
            width: 40px;
            height: 40px;
            z-index: 310;
            background: #1f365c;
            border-radius: 7px;
            cursor: pointer;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 7px #18518c17;
        }

        .hamburger span,
        .hamburger span:before,
        .hamburger span:after {
            display: block;
            width: 24px;
            height: 3.3px;
            background: #fff;
            border-radius: 2px;
            position: absolute;
        }

        .hamburger span {
            position: relative;
        }

        .hamburger span:before {
            content: "";
            position: absolute;
            top: -8px;
        }

        .hamburger span:after {
            content: "";
            position: absolute;
            top: 8px;
        }

        @media (max-width: 900px) {
            .sidebar {
                width: 190px;
            }
        }

        @media (max-width: 700px) {
            .sidebar {
                right: -210px;
                width: 180px;
                box-shadow: none;
            }

            .sidebar.open {
                right: 0;
                box-shadow: -2px 0 14px #0003;
            }

            .hamburger {
                display: flex;
            }
        }

        /* Responsive main content with sidebar */
        .main {
            margin-right: 225px;
            padding: 40px 30px 38px 18px;
            min-height: 100vh;
            transition: margin-right 0.25s;
        }

        @media (max-width: 900px) {
            .main {
                margin-right: 190px;
            }
        }

        @media (max-width: 700px) {
            .main {
                margin-right: 0;
                padding: 28px 7px 24px 7px;
            }
        }

        /* Dashboard cards */
        .dashboard-cards {
            display: grid;
            gap: 22px;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            margin-bottom: 36px;
        }

        .dashboard-card {
            background: #f9fbff;
            border: 1.7px solid #d3e7ff;
            box-shadow: 0 8px 24px #23509c10;
            border-radius: 14px;
            padding: 26px 15px 22px 18px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            min-height: 126px;
            transition: box-shadow 0.13s, border 0.13s;
            position: relative;
        }

        .dashboard-card .card-value {
            font-size: 2.12rem;
            color: #247ae0;
            font-weight: 700;
            direction: ltr;
            margin-bottom: 7px;
        }

        .dashboard-card .card-label {
            font-size: 1.105rem;
            color: #3c5275;
            font-weight: 500;
        }

        .dashboard-card.sales .card-value {
            color: #2d6e3a;
        }

        .dashboard-card.profit .card-value {
            color: #ba7e18;
        }

        .dashboard-card.customers .card-value {
            color: #2d5397;
        }

        .dashboard-card.deliveries .card-value {
            color: #247ae0;
        }

        .dashboard-card.quarries .card-value {
            color: #285236;
        }

        .dashboard-card.contractors .card-value {
            color: #c0392b;
        }

        /* Chart section */
        .dashboard-charts-section {
            margin-top: 27px;
        }

        .charts-title {
            font-weight: 600;
            color: #27406b;
            font-size: 1.22rem;
            margin-bottom: 18px;
            margin-top: 0;
        }

        .charts-placeholders {
            display: grid;
            gap: 24px;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .chart-placeholder {
            background: #f3f7fa;
            border: 1.25px solid #dae6f6;
            min-height: 230px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            color: #a1b3ce;
            font-size: 1.13rem;
            font-style: italic;
        }

        @media (max-width: 600px) {
            .dashboard-cards {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .charts-placeholders {
                grid-template-columns: 1fr;
                gap: 14px;
            }
        }
    </style>
</head>

<body>
    <!-- Hamburger menu for mobile -->
    <button class="hamburger" id="sidebarHamburger" aria-label="القائمة الجانبية">
        <span></span>
    </button>
    <!-- Sidebar navigation -->
    <nav class="sidebar" id="sidebar">
        <div class="app-title">نظام التوزيع</div>
        <ul>
            <li><a href="index.html" class="active">لوحة التحكم</a></li>
            <li><a href="clients.html">العملاء</a></li>
            <li><a href="crushers.html">الكسارات</a></li>
            <li><a href="contractors.html">مقاولين العجل</a></li>
            <li><a href="new-entry.html">تسليم جديد</a></li>
        </ul>
        <div class="sidenav-spacer"></div>
    </nav>
    <!-- Main content -->
    <main class="main" id="mainContent">
        <h1 style="font-weight:700;color:#1d3359;font-size:2rem;margin-bottom:30px;text-align:right">لوحة التحكم</h1>
        <!-- Dashboard KPI Cards -->
        <section class="dashboard-cards" id="dashboardCards">
            <!-- تم بناء هذه العناصر ديناميكيًا عبر JS -->
            <div class="dashboard-card customers">
                <div class="card-value" id="totalClients">—</div>
                <div class="card-label">إجمالي العملاء</div>
            </div>
            <div class="dashboard-card quarries">
                <div class="card-value" id="totalCrushers">—</div>
                <div class="card-label">إجمالي الكسارات</div>
            </div>
            <div class="dashboard-card contractors">
                <div class="card-value" id="totalContractors">—</div>
                <div class="card-label">إجمالي مقاولي العجل</div>
            </div>
            <div class="dashboard-card deliveries">
                <div class="card-value" id="totalDeliveries">—</div>
                <div class="card-label">إجمالي التسليمات</div>
            </div>
            <div class="dashboard-card profit">
                <div class="card-value" id="netProfit">—</div>
                <div class="card-label">صافي الربح</div>
            </div>
            <div class="dashboard-card sales">
                <div class="card-value" id="totalSales">—</div>
                <div class="card-label">المبيعات الإجمالية</div>
            </div>
        </section>
        <!-- Charts Section -->
        <section class="dashboard-charts-section">
            <h2 class="charts-title">إحصائيات بيانية</h2>
            <div class="charts-placeholders">
                <div class="chart-placeholder">
                    مبيعات حسب العميل (قريباً)
                </div>
                <div class="chart-placeholder">
                    مبيعات حسب الكسارة (قريباً)
                </div>
            </div>
        </section>
    </main>
    <!-- Dashboard JS -->
    <script>
        // Hamburger menu behavior
        const sidebar = document.getElementById('sidebar');
        const hamburger = document.getElementById('sidebarHamburger');
        hamburger.addEventListener('click', function () {
            sidebar.classList.toggle('open');
        });
        // عند ضغط خارج القائمة الجانبية على الموبايل تُغلق تلقائيا
        document.body.addEventListener('click', function (e) {
            if (window.innerWidth <= 700 && sidebar.classList.contains('open')) {
                if (!sidebar.contains(e.target) && e.target !== hamburger) {
                    sidebar.classList.remove('open');
                }
            }
        });
        // إغلاق القائمة عند تغيير حجم الشاشة
        window.addEventListener('resize', function () {
            if (window.innerWidth > 700 && sidebar.classList.contains('open')) {
                sidebar.classList.remove('open');
            }
        });
    </script>
    <script src="../js/dashboard.js"></script>
</body>

</html>