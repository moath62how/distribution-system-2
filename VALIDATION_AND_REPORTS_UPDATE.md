# ุชุญุฏูุซ ุงููุงููุฏูุดู ูุงูุชูุงุฑูุฑ

## ุงูููุฒุงุช ุงููุถุงูุฉ

### 1. โ ูุงููุฏูุดู ููุน ุชูุฑุงุฑ ุฃุฑูุงู ุงูุดููุงุช ูุงูุญูุงูุงุช
- **ุงููุดููุฉ**: ุฅููุงููุฉ ุชูุฑุงุฑ ุฃุฑูุงู ุงูุดููุงุช ูุงูุญูุงูุงุช ุงูุจูููุฉ
- **ุงูุญู**: ูุงููุฏูุดู ุดุงูู ุนุจุฑ ุฌููุน ุงูุฌุฏุงูู (payments, crusher_payments, contractor_payments, adjustments)
- **ุงูุชุทุจูู**: ูู ูุณุงุฑุงุช ุฅุถุงูุฉ ุงููุฏููุนุงุช ูุงูุชุณููุงุช ููุนููุงุก

```javascript
// Validate unique payment details for specific methods
if (details && ['ุจููู', 'ุดูู', 'ุงูุณุชุงุจุงู', 'ููุฏุงููู ูุงุด'].includes(method)) {
    const existingPayment = await db('payments')
        .where({ details, method })
        .orWhere(function() {
            this.select('*').from('crusher_payments').where({ details, payment_method: method });
        })
        // ... check all tables
        .first();

    if (existingPayment) {
        let errorMsg = method === 'ุดูู' ? `ุฑูู ุงูุดูู ${details} ูุณุชุฎุฏู ูู ูุจู` : 
                      method === 'ุจููู' ? `ุฑูู ุงูุญูุงูุฉ ุงูุจูููุฉ ${details} ูุณุชุฎุฏู ูู ูุจู` : 
                      `ุฑูู ุงููุนุงููุฉ ${details} ูุณุชุฎุฏู ูู ูุจู`;
        return res.status(400).json({ message: errorMsg });
    }
}
```

### 2. โ ูุงููุฏูุดู ููุน ุชูุฑุงุฑ ุฃุฑูุงู ุงูุจููุงุช
- **ุงููุดููุฉ**: ุฅููุงููุฉ ุชูุฑุงุฑ ุฃุฑูุงู ุงูุจููุงุช ูู ุงูุชุณูููุงุช
- **ุงูุญู**: ูุงููุฏูุดู ูู ูุณุงุฑ ุฅูุดุงุก ุงูุชุณูููุงุช
- **ุงูููู**: `backend/routes/deliveries.js`

```javascript
// Validate unique voucher number if provided
if (voucher) {
    const existingDelivery = await db('deliveries').where({ voucher }).first();
    if (existingDelivery) {
        return res.status(400).json({ message: `ุฑูู ุงูุจูู ${voucher} ูุณุชุฎุฏู ูู ูุจู` });
    }
}
```

### 3. โ ุนุฑุถ ุงูุตูุฑ ูู ุฌุฏุงูู ุงููุฏููุนุงุช ูุงูุชุณููุงุช
- **ุงููุดููุฉ**: ุนุฏู ุฅููุงููุฉ ุนุฑุถ ุตูุฑ ุงููุฏููุนุงุช ุงููุฑููุนุฉ
- **ุงูุญู**: ุฅุถุงูุฉ ุนููุฏ "ุงูุตูุฑุฉ" ูุน ุฒุฑ ุนุฑุถ
- **ุงูููุฒุงุช**:
  - ุฒุฑ "๐ผ๏ธ ุนุฑุถ" ููู ุฏูุนุฉ/ุชุณููุฉ ููุง ุตูุฑุฉ
  - ููุฏุงู ุนุฑุถ ุงูุตูุฑุฉ ุจุญุฌู ูุงูู
  - ุนุฑุถ "-" ูููุฏููุนุงุช ุจุฏูู ุตูุฑ

### 4. โ ุชูุฑูุฑ ุงูุชูุฑูุฏุงุช PDF
- **ุงููุตู**: ุชูุฑูุฑ ููุตู ุจุงููููุงุช ุงูููุฑุฏู ุญุณุจ ููุน ุงููุงุฏุฉ
- **ุงููุญุชูู**:
  - ููุฎุต ุงูููุงุฏ (ุงููููุฉ ุงูุฅุฌูุงููุฉ ููู ูุงุฏุฉ)
  - ุฌุฏูู ุชูุตููู ุจุฌููุน ุงูุชุณูููุงุช
  - ุงูุชุงุฑูุฎุ ููุน ุงููุงุฏุฉุ ุงููููุฉุ ุงูุณุนุฑุ ุงูุฅุฌูุงููุ ุฑูู ุงูุจููุ ุงููุณุงุฑุฉ
- **ุงูุชุตููุฉ**: ุญุณุจ ูุชุฑุฉ ุฒูููุฉ ูุญุฏุฏุฉ
- **ุงูุชุตููู**: ุชุตููู ุงุญุชุฑุงูู ูุงุจู ููุทุจุงุนุฉ

### 5. โ ูุดู ุญุณุงุจ ุงูุนููู PDF
- **ุงููุตู**: ูุดู ุญุณุงุจ ุดุงูู ุจุฌููุน ุงููุนุงููุงุช
- **ุงููุญุชูู**:
  - ููุฎุต ุงูุญุณุงุจ (ุงูุฑุตูุฏ ุงูุงูุชุชุงุญูุ ุงูุชูุฑูุฏุงุชุ ุงููุฏููุนุงุชุ ุงูุชุนุฏููุงุชุ ุงูุฑุตูุฏ ุงูุตุงูู)
  - ุฌุฏูู ุงูุชูุฑูุฏุงุช ูุน ุงูุชูุงุตูู
  - ุฌุฏูู ุงููุฏููุนุงุช ูุน ุทุฑููุฉ ุงูุฏูุน ูุงูููุงุญุธุงุช
  - ุฌุฏูู ุงูุชุณููุงุช ูุงูุชุนุฏููุงุช (ุฅู ูุฌุฏุช)
- **ุงูุฃููุงู**: ุฃุฎุถุฑ ูููุจุงูุบ ููุงุ ุฃุญูุฑ ูููุจุงูุบ ุนูููุง
- **ุงูุชุตููุฉ**: ุญุณุจ ูุชุฑุฉ ุฒูููุฉ ูุญุฏุฏุฉ

## ุงููููุงุช ุงููุญุฏุซุฉ

### 1. `backend/routes/clients.js`
- ุฅุถุงูุฉ ูุงููุฏูุดู ุฃุฑูุงู ุงูุดููุงุช ูุงูุญูุงูุงุช
- ุฅุถุงูุฉ ูุณุงุฑุงุช ุงูุชูุงุฑูุฑ:
  - `GET /:id/reports/deliveries` - ุชูุฑูุฑ ุงูุชูุฑูุฏุงุช
  - `GET /:id/reports/statement` - ูุดู ุงูุญุณุงุจ
- ุฏูุงู ุฅูุดุงุก HTML ููุชูุงุฑูุฑ

### 2. `backend/routes/deliveries.js`
- ุฅุถุงูุฉ ูุงููุฏูุดู ุฃุฑูุงู ุงูุจููุงุช

### 3. `backend/public/js/clients-details.js`
- ุชุญุฏูุซ ุนุฑุถ ุงูุฌุฏุงูู ูุฅุถุงูุฉ ุนููุฏ ุงูุตูุฑ
- ุฅุถุงูุฉ ุฏุงูุฉ `showImageModal()` ูุนุฑุถ ุงูุตูุฑ
- ุฅุถุงูุฉ ุฏูุงู ุฅูุดุงุก ุงูุชูุงุฑูุฑ:
  - `generateDeliveriesReport()`
  - `generateAccountStatement()`

### 4. `backend/public/clients-details.html`
- ุฅุถุงูุฉ ููุฏุงู ุนุฑุถ ุงูุตูุฑ
- ุฅุถุงูุฉ ูุณู ุงูุชูุงุฑูุฑ ูุน:
  - ูุงุฑุช ุชูุฑูุฑ ุงูุชูุฑูุฏุงุช
  - ูุงุฑุช ูุดู ุญุณุงุจ ุงูุนููู
  - ุญููู ุงุฎุชูุงุฑ ุงูุชุงุฑูุฎ
  - ุฃุฒุฑุงุฑ ุฅูุดุงุก ุงูุชูุงุฑูุฑ

## ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ูุณู ุงูุชูุงุฑูุฑ
- **ุชุตููู**: ูุงุฑุชูู ุจุชุฏุฑุฌ ูููู ุฌุฐุงุจ
- **ุงูุฃููุงู**: ุฃุฒุฑู ููุชูุฑูุฏุงุชุ ุฃุฎุถุฑ ููุดู ุงูุญุณุงุจ
- **ุงูุชูุงุนู**: ุญููู ุชุงุฑูุฎ ูุฃุฒุฑุงุฑ ูุงุถุญุฉ
- **ุงูุงุณุชุฌุงุจุฉ**: ุชุตููู ูุชุฌุงูุจ ููุดุงุดุงุช ุงููุฎุชููุฉ

### ุนุฑุถ ุงูุตูุฑ
- **ุงูุฌุฏุงูู**: ุนููุฏ ุฌุฏูุฏ "ุงูุตูุฑุฉ" ูุน ุฃุฒุฑุงุฑ ุนุฑุถ
- **ุงูููุฏุงู**: ุนุฑุถ ุงูุตูุฑุฉ ุจุญุฌู ูุงูู ูุน ุฅููุงููุฉ ุงูุฅุบูุงู
- **ุงูุชุตููู**: ููุฏุงู ูุธูู ููุชูุฑูุฒ

## ุงูุชูุงุฑูุฑ PDF

### ุชูุฑูุฑ ุงูุชูุฑูุฏุงุช
```
ุงูุนููู: [ุงุณู ุงูุนููู]
ุชูุฑูุฑ ุงูุชูุฑูุฏุงุช ุงูููุตู
ูู [ุชุงุฑูุฎ] ุฅูู [ุชุงุฑูุฎ]

ููุฎุต ุงูููุงุฏ:
[ุฑูู: 150 ูยณ - 5 ุชุณูููุงุช - 7,500 ุฌููู]
[ุณู 1: 200 ูยณ - 8 ุชุณูููุงุช - 12,000 ุฌููู]

ุชูุงุตูู ุงูุชุณูููุงุช:
| ุงูุชุงุฑูุฎ | ููุน ุงููุงุฏุฉ | ุงููููุฉ | ุงูุณุนุฑ | ุงูุฅุฌูุงูู | ุฑูู ุงูุจูู | ุงููุณุงุฑุฉ |
```

### ูุดู ุงูุญุณุงุจ
```
ุงูุนููู: [ุงุณู ุงูุนููู]
ูุดู ุญุณุงุจ ุดุงูู
ูู [ุชุงุฑูุฎ] ุฅูู [ุชุงุฑูุฎ]

ููุฎุต ุงูุญุณุงุจ:
ุงูุฑุตูุฏ ุงูุงูุชุชุงุญู: 0 ุฌููู
ุฅุฌูุงูู ุงูุชูุฑูุฏุงุช: 19,500 ุฌููู (ุฃุฎุถุฑ)
ุฅุฌูุงูู ุงููุฏููุนุงุช: 15,000 ุฌููู (ุฃุญูุฑ)
ุงูุฑุตูุฏ ุงูุตุงูู: 4,500 ุฌููู (ุนููู ููุง - ุฃุฎุถุฑ)

ุงูุชูุฑูุฏุงุช: [ุฌุฏูู ููุตู]
ุงููุฏููุนุงุช: [ุฌุฏูู ููุตู]
ุงูุชุณููุงุช: [ุฌุฏูู ููุตู ุฅู ูุฌุฏุช]
```

## ุฑุณุงุฆู ุงููุงููุฏูุดู

### ุฃุฑูุงู ุงูุดููุงุช ูุงูุญูุงูุงุช
- `ุฑูู ุงูุดูู 12345 ูุณุชุฎุฏู ูู ูุจู`
- `ุฑูู ุงูุญูุงูุฉ ุงูุจูููุฉ 67890 ูุณุชุฎุฏู ูู ูุจู`
- `ุฑูู ุงููุนุงููุฉ 11111 ูุณุชุฎุฏู ูู ูุจู`

### ุฃุฑูุงู ุงูุจููุงุช
- `ุฑูู ุงูุจูู 2024001 ูุณุชุฎุฏู ูู ูุจู`

## ุงุฎุชุจุงุฑ ุงูููุฒุงุช

### 1. ุงุฎุชุจุงุฑ ุงููุงููุฏูุดู:
```javascript
// ูุญุงููุฉ ุฅุถุงูุฉ ุดูู ุจุฑูู ููุฑุฑ
POST /api/clients/1/payments
{
  "amount": 1000,
  "method": "ุดูู",
  "details": "12345" // ุฑูู ููุฑุฑ
}
// ุงููุชูุฌุฉ ุงููุชููุนุฉ: ุฎุทุฃ 400 ูุน ุฑุณุงูุฉ "ุฑูู ุงูุดูู 12345 ูุณุชุฎุฏู ูู ูุจู"
```

### 2. ุงุฎุชุจุงุฑ ุนุฑุถ ุงูุตูุฑ:
- ุงูุชุญ ุตูุญุฉ ุชูุงุตูู ุงูุนููู
- ุงุจุญุซ ุนู ุฏูุนุฉ ููุง ุตูุฑุฉ
- ุงููุฑ ุนูู ุฒุฑ "๐ผ๏ธ ุนุฑุถ"
- ุชุฃูุฏ ูู ุธููุฑ ุงูุตูุฑุฉ ูู ุงูููุฏุงู

### 3. ุงุฎุชุจุงุฑ ุงูุชูุงุฑูุฑ:
- ุญุฏุฏ ูุชุฑุฉ ุฒูููุฉ ูู ูุณู ุงูุชูุงุฑูุฑ
- ุงููุฑ ุนูู "๐ ุฅูุดุงุก ุชูุฑูุฑ ุงูุชูุฑูุฏุงุช"
- ุชุฃูุฏ ูู ูุชุญ ุตูุญุฉ PDF ุฌุฏูุฏุฉ
- ูุฑุฑ ููุณ ุงูุฎุทูุงุช ููุดู ุงูุญุณุงุจ

## ูุชุทูุจุงุช ุฅุนุงุฏุฉ ุงูุชุดุบูู

โ๏ธ **ููู**: ูุฌุจ ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู ูุชุทุจูู ุงูุชุญุฏูุซุงุช:

```bash
# ุฅููุงู ุงูุฎุงุฏู ุงูุญุงูู (Ctrl+C)
# ุซู ุฅุนุงุฏุฉ ุงูุชุดุบูู
cd backend
node server.js
```

## ุงูุฎุทูุงุช ุงูุชุงููุฉ

1. **ุงุฎุชุจุงุฑ ุงููุงููุฏูุดู** - ุชุฃูุฏ ูู ุนุฏู ุฅููุงููุฉ ุชูุฑุงุฑ ุงูุฃุฑูุงู
2. **ุงุฎุชุจุงุฑ ุนุฑุถ ุงูุตูุฑ** - ุชุฃูุฏ ูู ุนูู ุงูููุฏุงู
3. **ุงุฎุชุจุงุฑ ุงูุชูุงุฑูุฑ** - ุชุฃูุฏ ูู ุฅูุดุงุก PDF ุตุญูุญ
4. **ุชุทุจูู ููุณ ุงูููุฒุงุช** ุนูู ุงููุณุงุฑุงุช ูุงูููุงูููู ุฅุฐุง ูุฒู ุงูุฃูุฑ

## ููุงุญุธุงุช ุชูููุฉ

- ุงูุชูุงุฑูุฑ ุชููุดุฃ ูู HTML ูุชูุนุฑุถ ูู ูุงูุฐุฉ ุฌุฏูุฏุฉ ููุทุจุงุนุฉ
- ูููู ุชุญุณูู ุงูุชูุงุฑูุฑ ูุงุญูุงู ุจุงุณุชุฎุฏุงู ููุชุจุฉ PDF ูุฎุตุตุฉ
- ุงููุงููุฏูุดู ูุนูู ุนุจุฑ ุฌููุน ุงูุฌุฏุงูู ูุถูุงู ุนุฏู ุงูุชูุฑุงุฑ
- ุงูุตูุฑ ุชูุนุฑุถ ูู base64 ุงููุญููุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช