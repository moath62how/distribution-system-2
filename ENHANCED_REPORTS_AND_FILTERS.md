# ุชุญุณูู ุงูุชูุงุฑูุฑ ูุงูููุงุชุฑ

## ุงูุชุญุณููุงุช ุงููุทุจูุฉ

### 1. โ ุชุญุณูู ูุดู ุญุณุงุจ ุงูุนููู

#### ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ:
- **ุฎูุงุฑ ุงูุชุงุฑูุฎ ุงูุงุฎุชูุงุฑู**: ูููู ุฅูุดุงุก ูุดู ุญุณุงุจ ุจุฏูู ุชุญุฏูุฏ ุชุงุฑูุฎ (ุฌููุน ุงูุจูุงูุงุช)
- **ูุงุฌูุฉ ูุญุณูุฉ**: checkbox ูุชูุนูู/ุฅูุบุงุก ุชุญุฏูุฏ ุงููุชุฑุฉ ุงูุฒูููุฉ
- **ุชูุงุฑูุฎ ุงูุชุฑุงุถูุฉ ุฐููุฉ**: ูู ุฃูู ุงูุณูุฉ ุฅูู ุงูููู ุนูุฏ ุงูุชูุนูู

#### ููููุฉ ุงูุนูู:
```javascript
// ุจุฏูู ุชุญุฏูุฏ ุชุงุฑูุฎ - ุฌููุน ุงูุจูุงูุงุช
GET /api/clients/1/reports/statement

// ูุน ุชุญุฏูุฏ ุชุงุฑูุฎ - ูุชุฑุฉ ูุญุฏุฏุฉ  
GET /api/clients/1/reports/statement?from=2024-01-01&to=2024-12-31
```

#### ุงูุชุตููู ุงููุญุณู:
- ุชุตููู ุงุญุชุฑุงูู ุจุฃููุงู ูุชุฏุฑุฌุฉ
- ุฃูุณุงู ูุงุถุญุฉ ูุน ุฃููููุงุช
- ุฃููุงู ูููุฒุฉ (ุฃุฎุถุฑ = ููุงุ ุฃุญูุฑ = ุนูููุง)
- ุชุฃุซูุฑุงุช hover ูุชุญุณููุงุช ุจุตุฑูุฉ
- ุฑุณุงูุฉ "ูุง ุชูุฌุฏ ุจูุงูุงุช" ููุฃูุณุงู ุงููุงุฑุบุฉ

### 2. โ ููุงุชุฑ ุงูุชุงุฑูุฎ ููุฌุฏุงูู

#### ุงูุฌุฏุงูู ุงููุญุฏุซุฉ:
- **ุฌุฏูู ุงูุชุณูููุงุช**: ุจุญุซ + ูู ุชุงุฑูุฎ + ุฅูู ุชุงุฑูุฎ + ุชุฑุชูุจ
- **ุฌุฏูู ุงููุฏููุนุงุช**: ุจุญุซ + ูู ุชุงุฑูุฎ + ุฅูู ุชุงุฑูุฎ + ุชุฑุชูุจ  
- **ุฌุฏูู ุงูุชุณููุงุช**: ุจุญุซ + ูู ุชุงุฑูุฎ + ุฅูู ุชุงุฑูุฎ + ุชุฑุชูุจ

#### ุงูููุฒุงุช:
- ููุชุฑุฉ ุจุงููุต ูุงูุชุงุฑูุฎ ูุนุงู
- ุฃุฒุฑุงุฑ "ูุณุญ ุงูููุงุชุฑ" ููู ุฌุฏูู
- ููุชุฑุฉ ููุฑูุฉ ุนูุฏ ุชุบููุฑ ุฃู ุญูู
- ุญูุธ ุญุงูุฉ ุงูููุงุชุฑ ุฃุซูุงุก ุงูุชููู

### 3. โ ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุณูุฉ

#### ุชุญุณููุงุช ุงูุชุตููู:
- **ููุงุชุฑ ููุธูุฉ**: ุญููู ุงูุจุญุซ ูุงูุชุงุฑูุฎ ูู ุตู ูุงุญุฏ
- **ุฃุฒุฑุงุฑ ูุงุถุญุฉ**: ุฃุฒุฑุงุฑ ูุณุญ ุงูููุงุชุฑ ูุน ุชุตููู ุซุงููู
- **ุชุฎุทูุท ูุชุฌุงูุจ**: ูุชููู ูุน ุฃุญุฌุงู ุงูุดุงุดุงุช ุงููุฎุชููุฉ
- **ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุณูุณุฉ**: ุชูุงุนู ููุฑู ูุน ุงูููุงุชุฑ

## ุงููููุงุช ุงููุญุฏุซุฉ

### 1. `backend/public/clients-details.html`
```html
<!-- ุชุญุณูู ูุงุฌูุฉ ูุดู ุงูุญุณุงุจ -->
<label>
    <input type="checkbox" id="useCustomDateRange" onchange="toggleDateRange()">
    ุชุญุฏูุฏ ูุชุฑุฉ ุฒูููุฉ ูุญุฏุฏุฉ
</label>

<!-- ุฅุถุงูุฉ ููุงุชุฑ ุงูุชุงุฑูุฎ ููุฌุฏุงูู -->
<div class="controls">
    <input type="text" id="deliveriesSearch" placeholder="ุงุจุญุซ...">
    <input type="date" id="deliveriesDateFrom" placeholder="ูู ุชุงุฑูุฎ">
    <input type="date" id="deliveriesDateTo" placeholder="ุฅูู ุชุงุฑูุฎ">
    <select id="deliveriesSort">...</select>
    <button onclick="clearDeliveriesFilters()">ูุณุญ ุงูููุงุชุฑ</button>
</div>
```

### 2. `backend/public/js/clients-details.js`
```javascript
// ุฏูุงู ุงูููุชุฑุฉ ุงููุญุณูุฉ
function filterDeliveries() {
    const searchTerm = document.getElementById('deliveriesSearch').value.toLowerCase();
    const dateFrom = document.getElementById('deliveriesDateFrom').value;
    const dateTo = document.getElementById('deliveriesDateTo').value;
    
    let filtered = allDeliveries.filter(delivery => {
        // ููุชุฑุฉ ุงููุต
        const matchesSearch = !searchTerm || /* ... */;
        
        // ููุชุฑุฉ ุงูุชุงุฑูุฎ
        const deliveryDate = new Date(delivery.created_at).toISOString().split('T')[0];
        const matchesDateFrom = !dateFrom || deliveryDate >= dateFrom;
        const matchesDateTo = !dateTo || deliveryDate <= dateTo;
        
        return matchesSearch && matchesDateFrom && matchesDateTo;
    });
    
    // ุชุฑุชูุจ ูุนุฑุถ ุงููุชุงุฆุฌ
    /* ... */
}

// ุฏูุงู ูุณุญ ุงูููุงุชุฑ
function clearDeliveriesFilters() {
    document.getElementById('deliveriesSearch').value = '';
    document.getElementById('deliveriesDateFrom').value = '';
    document.getElementById('deliveriesDateTo').value = '';
    filterDeliveries();
}
```

### 3. `backend/routes/clients.js`
```javascript
// ูุณุงุฑ ูุดู ุงูุญุณุงุจ ุงููุญุณู
router.get('/:id/reports/statement', async (req, res, next) => {
    const { from, to } = req.query;
    
    // ุจูุงุก ุงูุงุณุชุนูุงูุงุช ูุน ุฃู ุจุฏูู ุชุงุฑูุฎ
    let deliveriesQuery = db('deliveries').where('client_id', id);
    
    if (from && to) {
        deliveriesQuery = deliveriesQuery.whereBetween('created_at', [from, to]);
    }
    
    // ุชุญุฏูุฏ ูุต ุงููุชุฑุฉ ุงูุฒูููุฉ ููุนุฑุถ
    let dateRangeText = from && to ? 
        `ูู ${formatDate(from)} ุฅูู ${formatDate(to)}` : 
        'ุฌููุน ุงูุจูุงูุงุช';
    
    // ุฅูุดุงุก HTML ูุญุณู
    const html = generateAccountStatementHTML(client, deliveries, payments, adjustments, totals, dateRangeText);
});
```

## ูุดู ุงูุญุณุงุจ ุงููุญุณู

### ุงูุชุตููู ุงูุฌุฏูุฏ:
- **ุฑุฃุณ ุฃููู**: ุงุณู ุงูุนููู ุจุฎุท ูุจูุฑ ูุชุตููู ุงุญุชุฑุงูู
- **ููุฎุต ุจุตุฑู**: ูุงุฑุช ูููู ุจุชุฏุฑุฌ ุฃุฒุฑู ูุน ุดุจูุฉ ููุธูุฉ
- **ุฃูุณุงู ูุงุถุญุฉ**: ูู ูุณู ูู ููู ูุฃููููุฉ ูููุฒุฉ
- **ุฌุฏุงูู ูุญุณูุฉ**: ุชุฃุซูุฑุงุช hover ูุฃููุงู ูุชูุงูุจุฉ
- **ุชุฐููู ูุนูููุงุชู**: ุชุงุฑูุฎ ูููุช ุงูุฅูุดุงุก

### ุงูุฃููุงู ุงููุณุชุฎุฏูุฉ:
- **ุฃุฎุถุฑ (#27ae60)**: ุงููุจุงูุบ ููุง (ุชูุฑูุฏุงุชุ ุชุนุฏููุงุช ููุฌุจุฉ)
- **ุฃุญูุฑ (#e74c3c)**: ุงููุจุงูุบ ุนูููุง (ูุฏููุนุงุชุ ุชุนุฏููุงุช ุณุงูุจุฉ)
- **ุฃุฒุฑู (#3498db)**: ุงูุนูุงุตุฑ ุงูุฃุณุงุณูุฉ ูุงูุฎูููุงุช
- **ุฑูุงุฏู (#7f8c8d)**: ุงููุตูุต ุงูุซุงูููุฉ ูุงูุชูุงุตูู

## ุงูููุงุชุฑ ุงููุชูุฏูุฉ

### ุฌุฏูู ุงูุชุณูููุงุช:
- **ุงูุจุญุซ ุงููุตู**: ูู ุงุณู ุงููุณุงุฑุฉุ ุงูููุงููุ ููุน ุงููุงุฏุฉุ ุฑูู ุงูุจูู
- **ููุชุฑ ุงูุชุงุฑูุฎ**: ูู ุชุงุฑูุฎ ุฅูู ุชุงุฑูุฎ
- **ุงูุชุฑุชูุจ**: ุญุณุจ ุงูุชุงุฑูุฎ ุฃู ุงููููุฉ (ุชุตุงุนุฏู/ุชูุงุฒูู)

### ุฌุฏูู ุงููุฏููุนุงุช:
- **ุงูุจุญุซ ุงููุตู**: ูู ุงูููุงุญุธุงุชุ ุทุฑููุฉ ุงูุฏูุนุ ุงูุชูุงุตูู
- **ููุชุฑ ุงูุชุงุฑูุฎ**: ูู ุชุงุฑูุฎ ุฅูู ุชุงุฑูุฎ  
- **ุงูุชุฑุชูุจ**: ุญุณุจ ุงูุชุงุฑูุฎ ุฃู ุงููุจูุบ (ุชุตุงุนุฏู/ุชูุงุฒูู)

### ุฌุฏูู ุงูุชุณููุงุช:
- **ุงูุจุญุซ ุงููุตู**: ูู ุงูุณุจุจุ ุทุฑููุฉ ุงูุชุณููุฉุ ุงูุชูุงุตูู
- **ููุชุฑ ุงูุชุงุฑูุฎ**: ูู ุชุงุฑูุฎ ุฅูู ุชุงุฑูุฎ
- **ุงูุชุฑุชูุจ**: ุญุณุจ ุงูุชุงุฑูุฎ ุฃู ุงููุจูุบ (ุชุตุงุนุฏู/ุชูุงุฒูู)

## ุงุฎุชุจุงุฑ ุงูููุฒุงุช

### 1. ุงุฎุชุจุงุฑ ูุดู ุงูุญุณุงุจ:
```javascript
// ูุดู ุญุณุงุจ ุดุงูู (ุฌููุน ุงูุจูุงูุงุช)
window.open('/api/clients/1/reports/statement', '_blank');

// ูุดู ุญุณุงุจ ููุชุฑุฉ ูุญุฏุฏุฉ
window.open('/api/clients/1/reports/statement?from=2024-01-01&to=2024-12-31', '_blank');
```

### 2. ุงุฎุชุจุงุฑ ุงูููุงุชุฑ:
1. ุงูุชุญ ุตูุญุฉ ุชูุงุตูู ุงูุนููู
2. ูู ุฌุฏูู ุงูุชุณูููุงุช:
   - ุงูุชุจ ูุต ูู ุงูุจุญุซ
   - ุญุฏุฏ ุชุงุฑูุฎ "ูู" ู "ุฅูู"
   - ูุงุญุธ ุงูููุชุฑุฉ ุงูููุฑูุฉ
3. ุงููุฑ "ูุณุญ ุงูููุงุชุฑ" ูุชุฃูุฏ ูู ุฅุนุงุฏุฉ ุชุนููู ูู ุดูุก

### 3. ุงุฎุชุจุงุฑ ูุงุฌูุฉ ูุดู ุงูุญุณุงุจ:
1. ูู ูุณู ุงูุชูุงุฑูุฑ
2. ุงุชุฑูcheckbox "ุชุญุฏูุฏ ูุชุฑุฉ ุฒูููุฉ" ุบูุฑ ููุนู
3. ุงููุฑ "ุฅูุดุงุก ูุดู ุงูุญุณุงุจ" - ุณูุธูุฑ ุฌููุน ุงูุจูุงูุงุช
4. ูุนู checkbox ูุญุฏุฏ ูุชุฑุฉ ุฒูููุฉ
5. ุงููุฑ "ุฅูุดุงุก ูุดู ุงูุญุณุงุจ" - ุณูุธูุฑ ุงูุจูุงูุงุช ูููุชุฑุฉ ุงููุญุฏุฏุฉ

## ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

### ุงูุชุฑุงุญุงุช ููุชุทููุฑ:
1. **ุญูุธ ุงูููุงุชุฑ**: ุญูุธ ุฅุนุฏุงุฏุงุช ุงูููุชุฑ ูู localStorage
2. **ุชุตุฏูุฑ Excel**: ุฅุถุงูุฉ ุฎูุงุฑ ุชุตุฏูุฑ ุงูุจูุงูุงุช ุงููููุชุฑุฉ
3. **ููุงุชุฑ ูุชูุฏูุฉ**: ููุชุฑุฉ ุญุณุจ ููุน ุงููุงุฏุฉุ ุทุฑููุฉ ุงูุฏูุนุ ุฅูุฎ
4. **ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ**: ุนุฑุถ ุฅุญุตุงุฆูุงุช ููุจูุงูุงุช ุงููููุชุฑุฉ

## ููุงุญุธุงุช ุชูููุฉ

- ุฌููุน ุงูููุงุชุฑ ุชุนูู ุนูู ุงูุจูุงูุงุช ุงููุญููุฉ ูุณุจูุงู (client-side)
- ูุดู ุงูุญุณุงุจ ูุฏุนู ุงูุนูู ูุน ุฃู ุจุฏูู ูุนุงููุงุช ุงูุชุงุฑูุฎ
- ุงูุชุตููู ูุชุฌุงูุจ ููุนูู ุนูู ุฌููุน ุฃุญุฌุงู ุงูุดุงุดุงุช
- ุงูุฃููุงู ูุชุณูุฉ ูุน ูุธุงู ุงูุชุตููู ุงูุนุงู

## ูุชุทูุจุงุช ุฅุนุงุฏุฉ ุงูุชุดุบูู

โ๏ธ **ุชู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู ุจุงููุนู** - ุฌููุน ุงูุชุญุฏูุซุงุช ูุทุจูุฉ โ

ุงููุธุงู ุฌุงูุฒ ููุงุฎุชุจุงุฑ ูุงูุงุณุชุฎุฏุงู! ๐